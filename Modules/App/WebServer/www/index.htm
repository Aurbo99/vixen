<!DOCTYPE html>

<html>
	<head>
		<title>Vixen 3 Web Interface</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatable" content="IE=Edge,chrome=1"/>
		<link rel="stylesheet" href="/style/jquery.mobile-1.4.5.min.css" />
		<link rel="stylesheet" href="/style/vixen.css" />
	</head>

<body>
	<div data-role="page" id="Elements" data-title="Element">
		<div data-role="header" data-id="fixednav" data-position="fixed">
			<h2>Vixen</h2>
			<img src="/images/V3Logo.png" class="ui-btn-left" style="max-height: 50%"/>
			<div data-role="navbar">
				<ul>
					<li><a href="#Elements" class="ui-btn-active ui-state-persist">Elements</a></li>
					<li><a href="#Sequences">Sequences</a></li>
				</ul>
			</div>
		</div>
		<div role="main" class="ui-content">
			<form class="ui-filterable">
				<input id="elementSearch-input" data-type="search" placeholder="Find an Element..."/>
			</form>
			<ul data-role="listview" data-bind="foreach:elementResults, jqmRefreshList:elementResults" data-filter="true" data-inset="true" id="ElementSetFiltered" data-input="#elementSearch-input">
				<li>
					<h1 class="element-header" data-bind="text: Name"></h1>
					<button class="button-aside" data-icon="carat-r" data-iconpos="notext" value="Down" data-bind="click: $parent.elementClicked, visible:Children"></button>
					<form data-ajax="false" data-bind="submit: $root.turnOnElement">
						<!-- ko if:Colors.length > 0 -->
						<fieldset data-role="controlgroup" data-type="horizontal" data-bind="foreach:Colors">
							<input type="radio" name="color" data-mini="true" data-bind="value: $data, attr: { id: $parent.Name + $data }, checked:$parent.Colors[0]" />
							<label data-bind="attr: { for: $parent.Name + $data }, text:$data, style:{ background: $data}"></label>
						</fieldset>
						<!-- /ko -->
						<!-- ko ifnot:Colors.length > 0 -->
						<div class="ui-field-contain">
							<label data-bind="attr: { for: Name }" class="ui-hidden-accessible">Color:</label>
							<input type="color" data-mini="true" data-bind="attr: { id: Name }" name="color" value="#FFFFFF" />
						</div>
						<!-- /ko -->
						<input type="hidden" name="id" data-role="none" data-bind="value:Id" />
						<input type="submit" data-mini="true" value="On">
						<!--</div>-->
					</form>
					
					<!--<a href="#ElementControlPage" data-bind="click: $parent.elementClicked"></a>-->
				</li>
			</ul>
		</div>
		<div data-role="footer" data-id="fixedfooter" data-position="fixed">
			
			<label class="timeLabel" for="elementOnTime">Time/Intensity:</label>
			<input type="number" name="elementOnTime" id="elementOnTime" data-bind="value: timeout" data-mini="true"/>
			
			<label for="slider1" class="ui-hidden-accessible">Intensity:</label>
			<input type="range" name="intensity" id="slider1" data-highlight="true" min="0" max="100" data-bind="jqmSlider: elementIntensity">
			<span data-bind="text: status"></span>
		</div>
	</div>
	
	<div data-role="page" id="Sequences" data-title="Sequences">
		<div data-role="header" data-id="fixednav" data-position="fixed">
			<h2>Vixen</h2>
			<img src="/images/V3Logo.png" class="ui-btn-left" style="max-height: 50%" />
			<div data-role="navbar">
				<ul>
					<li><a href="#Elements">Elements</a></li>
					<li><a href="#Sequences" class="ui-btn-active ui-state-persist">Sequences</a></li>
				</ul>
			</div>
		</div>
		<div role="main" class="ui-content">
			<label for="select-sequence" class="select">Sequences:</label>
			<select name="select-sequence" id="select-sequence" data-bind="options: sequences, optionsCaption: 'Select Sequence...', optionsText: 'Name', value:selectedSequence">
				<option value="standard"></option>
			</select>

			<button data-role="button" data-bind="click: $root.playSequence, enable:selectedSequence">Play</button>
			<button data-role="button" data-bind="click: $root.stopSequence">Stop</button>
			<button data-role="button" data-bind="click: $root.getStatus">Status</button>
		</div>
		<div data-role="footer">
			<span data-bind="text: status"></span>
		</div>
	</div>

	<div data-role="page" id="ElementControlPage" data-title="Element Control">
		<div data-role="header" data-id="fixednav" data-position="fixed">
			<h2>Vixen</h2>
			<img src="/images/V3Logo.png" class="ui-btn-left" style="max-height: 50%" />
			<div data-role="navbar">
				<ul>
					<li><a href="#Elements" class="ui-btn-active ui-state-persist">Elements</a></li>
					<li><a href="#Sequences">Sequences</a></li>
				</ul>
			</div>
		</div>
		<div role="main" class="ui-content">
			<!-- ko if:selectedElement   -->
			<div data-bind="template: { name: 'element-template'}"></div>
			<!-- /ko -->
		</div>
		<div data-role="footer" data-id="fixedfooter" data-position="fixed">
			<!-- ko if:selectedElement   -->
			
			<label class="timeLabel" for="elementOnTime">Time/Intensity</label>
			<input type="number" name="elementOnTime" id="elementOnTime" data-bind="value: timeout" />
			
			<label for="slider2" class="ui-hidden-accessible">Intensity:</label>
			<input type="range" name="intensity" id="slider2" data-highlight="true" min="0" max="100" data-bind="jqmSlider: elementIntensity">
			<span data-bind="text: status"></span>
			<!-- /ko -->
		</div>
	</div>
	
	<!-- knockout template -->

	<script type="text/html" id="element-template">
		<!-- ko if:selectedElement().Children   -->
		<div id="elementControlContainer">
			<a href="#" data-bind="click: $root.navigateParent" data-mini="true"  data-direction="reverse" class="ui-btn ui-icon-arrow-u ui-btn-icon-left ui-corner-all ui-shadow ui-btn-inline">Up</a>

			<ul data-role="listview" data-bind="foreach:selectedElement().Children , jqmRefreshList:selectedElement().Children" data-inset="true">
				<li>
					<h1 class="element-header" data-bind="text: Name"></h1>
					<button class="button-aside" data-icon="carat-r" data-iconpos="notext" value="Down" data-bind="click: $parent.navigateChild, visible:Children"></button>
					<form data-ajax="false" data-bind="submit: $root.turnOnElement">
						
						<fieldset data-role="controlgroup" data-type="horizontal" data-bind="if: Colors.length > 0">
							<!-- ko foreach:Colors -->
							<input type="radio" name="color" data-mini="true" data-bind="value: $data, attr: { id: $parent.Name + $data + 'Child' }, checked:$parent.Colors[0]" />
							<label data-bind="attr: { for: $parent.Name + $data  + 'Child' }, text:$data, style:{ background: $data}"></label>
							<!-- /ko -->
						</fieldset>

						<div class="ui-field-contain" data-bind="ifnot:Colors.length > 0">
							<label data-bind="attr: { for: Name }">Color:</label>
							<input type="color" data-bind="attr: { id: Name }" name="color" value="#FFFFFF" />
						</div>
						<input type="hidden" name="id" data-role="none" data-bind="value:Id" />
						
						<input type="submit" value="On">
					</form>
				</li>
			</ul>
			
		</div>
		<!-- /ko -->
	</script>
	
	<script src="/js/jquery-1.11.2.min.js"></script>
	<script src="/js/jquery.mobile-1.4.5.min.js"></script>
	<script src="/js/knockout-3.2.0.js"></script>
	<script src="/js/moment.min.js"></script>
	<script src="/js/vixen.js"></script>

</body>
</html>